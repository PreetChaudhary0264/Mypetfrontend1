{"ast":null,"code":"import _objectSpread from\"C:/Users/ASUS/OneDrive/Desktop/FindMyPet/mypet-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useLocation,useNavigate}from'react-router-dom';import{QRCodeSVG}from'qrcode.react';import'./GenerateQR.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const GenerateQR=()=>{const location=useLocation();const navigate=useNavigate();const[owner,setOwner]=useState({phone:'',email:''});const[pet,setPet]=useState(null);const[qrValue,setQrValue]=useState('');const[isSubmitted,setIsSubmitted]=useState(false);// Load pet data if coming from registration\n// useEffect(() => {\n//   if (location.state?.pet) {\n//     setPet(location.state.pet);\n//   }\n// }, [location]);\nuseEffect(()=>{var _location$state,_location$state2;if((_location$state=location.state)!==null&&_location$state!==void 0&&_location$state.pet&&(_location$state2=location.state)!==null&&_location$state2!==void 0&&_location$state2.qrUrl){setPet(location.state.pet);setQrValue(location.state.qrUrl);}},[location]);const handleOwnerChange=e=>{const{name,value}=e.target;setOwner(_objectSpread(_objectSpread({},owner),{},{[name]:value}));};const generateQRCode=()=>{if(!pet){alert('No pet data found. Please register a pet first.');navigate('/register-pet');return;}const petDetailsUrl=\"http://localhost:3000/petdetails/\".concat(pet._id);setQrValue(petDetailsUrl);setIsSubmitted(true);};const downloadQR=()=>{const svg=document.querySelector(\"svg\");const svgData=new XMLSerializer().serializeToString(svg);const link=document.createElement(\"a\");link.href=\"data:image/svg+xml;base64,\".concat(btoa(svgData));link.download=\"mypet-qr-\".concat(pet.name,\".svg\");link.click();};return/*#__PURE__*/_jsxs(\"div\",{className:\"generate-qr-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Generate Pet QR Code\"}),!isSubmitted?/*#__PURE__*/_jsxs(\"div\",{className:\"qr-form\",children:[pet&&/*#__PURE__*/_jsxs(\"div\",{className:\"pet-preview\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Pet Details\"}),pet.photoPreview&&/*#__PURE__*/_jsx(\"img\",{src:pet.photoPreview,alt:pet.name}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name:\"}),\" \",pet.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Breed:\"}),\" \",pet.breed]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Age:\"}),\" \",pet.age,\" years\"]}),pet.bio&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Bio:\"}),\" \",pet.bio]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"owner-details\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Owner Contact Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Phone Number*\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",name:\"phone\",value:owner.phone,onChange:handleOwnerChange,placeholder:\"+1 234 567 8900\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email Address*\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",value:owner.email,onChange:handleOwnerChange,placeholder:\"your@email.com\",required:true})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:generateQRCode,className:\"generate-btn\",disabled:!owner.phone||!owner.email,children:\"Generate QR Code\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"qr-result\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"qr-code-display\",children:/*#__PURE__*/_jsx(QRCodeSVG,{value:qrValue,size:200,fgColor:\"#4b9cd3\",level:\"H\",includeMargin:true})}),/*#__PURE__*/_jsxs(\"p\",{className:\"qr-instructions\",children:[\"When scanned, this QR code will show:\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"strong\",{children:[pet.name,\"'s\"]}),\" details and your contact information\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"qr-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:downloadQR,className:\"download-btn\",children:\"Download QR Code\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsSubmitted(false),className:\"edit-btn\",children:\"Edit Information\"})]})]})]});};export default GenerateQR;","map":{"version":3,"names":["React","useState","useEffect","useLocation","useNavigate","QRCodeSVG","jsx","_jsx","jsxs","_jsxs","GenerateQR","location","navigate","owner","setOwner","phone","email","pet","setPet","qrValue","setQrValue","isSubmitted","setIsSubmitted","_location$state","_location$state2","state","qrUrl","handleOwnerChange","e","name","value","target","_objectSpread","generateQRCode","alert","petDetailsUrl","concat","_id","downloadQR","svg","document","querySelector","svgData","XMLSerializer","serializeToString","link","createElement","href","btoa","download","click","className","children","photoPreview","src","alt","breed","age","bio","type","onChange","placeholder","required","onClick","disabled","size","fgColor","level","includeMargin"],"sources":["C:/Users/ASUS/OneDrive/Desktop/FindMyPet/mypet-frontend/src/components/GenerateQR/GenerateQR.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { QRCodeSVG } from 'qrcode.react';\r\nimport './GenerateQR.css';\r\n\r\nconst GenerateQR = () => {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const [owner, setOwner] = useState({\r\n    phone: '',\r\n    email: ''\r\n  });\r\n  const [pet, setPet] = useState(null);\r\n  const [qrValue, setQrValue] = useState('');\r\n  const [isSubmitted, setIsSubmitted] = useState(false);\r\n\r\n  // Load pet data if coming from registration\r\n  // useEffect(() => {\r\n  //   if (location.state?.pet) {\r\n  //     setPet(location.state.pet);\r\n  //   }\r\n  // }, [location]);\r\n  useEffect(() => {\r\n  if (location.state?.pet && location.state?.qrUrl) {\r\n    setPet(location.state.pet);\r\n    setQrValue(location.state.qrUrl);\r\n  }\r\n}, [location]);\r\n\r\n\r\n  const handleOwnerChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setOwner({ ...owner, [name]: value });\r\n  };\r\n\r\n  const generateQRCode = () => {\r\n    if (!pet) {\r\n      alert('No pet data found. Please register a pet first.');\r\n      navigate('/register-pet');\r\n      return;\r\n    }\r\nconst petDetailsUrl = `http://localhost:3000/petdetails/${pet._id}`;\r\nsetQrValue(petDetailsUrl);\r\n\r\n    setIsSubmitted(true);\r\n  };\r\n\r\n  const downloadQR = () => {\r\n    const svg = document.querySelector(\"svg\");\r\n    const svgData = new XMLSerializer().serializeToString(svg);\r\n    const link = document.createElement(\"a\");\r\n    link.href = `data:image/svg+xml;base64,${btoa(svgData)}`;\r\n    link.download = `mypet-qr-${pet.name}.svg`;\r\n    link.click();\r\n  };\r\n\r\n  return (\r\n    <div className=\"generate-qr-container\">\r\n      <h2>Generate Pet QR Code</h2>\r\n      \r\n      {!isSubmitted ? (\r\n        <div className=\"qr-form\">\r\n          {pet && (\r\n            <div className=\"pet-preview\">\r\n              <h3>Pet Details</h3>\r\n              {pet.photoPreview && <img src={pet.photoPreview} alt={pet.name} />}\r\n              <p><strong>Name:</strong> {pet.name}</p>\r\n              <p><strong>Breed:</strong> {pet.breed}</p>\r\n              <p><strong>Age:</strong> {pet.age} years</p>\r\n              {pet.bio && <p><strong>Bio:</strong> {pet.bio}</p>}\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"owner-details\">\r\n            <h3>Owner Contact Information</h3>\r\n            <div className=\"form-group\">\r\n              <label>Phone Number*</label>\r\n              <input\r\n                type=\"tel\"\r\n                name=\"phone\"\r\n                value={owner.phone}\r\n                onChange={handleOwnerChange}\r\n                placeholder=\"+1 234 567 8900\"\r\n                required\r\n              />\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <label>Email Address*</label>\r\n              <input\r\n                type=\"email\"\r\n                name=\"email\"\r\n                value={owner.email}\r\n                onChange={handleOwnerChange}\r\n                placeholder=\"your@email.com\"\r\n                required\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <button \r\n            onClick={generateQRCode}\r\n            className=\"generate-btn\"\r\n            disabled={!owner.phone || !owner.email}\r\n          >\r\n            Generate QR Code\r\n          </button>\r\n        </div>\r\n      ) : (\r\n        <div className=\"qr-result\">\r\n          <div className=\"qr-code-display\">\r\n            <QRCodeSVG \r\n              value={qrValue} \r\n              size={200}\r\n              fgColor=\"#4b9cd3\"\r\n              level=\"H\"\r\n              includeMargin={true}\r\n            />\r\n          </div>\r\n          <p className=\"qr-instructions\">\r\n            When scanned, this QR code will show:\r\n            <br />\r\n            <strong>{pet.name}'s</strong> details and your contact information\r\n          </p>\r\n          <div className=\"qr-actions\">\r\n            <button onClick={downloadQR} className=\"download-btn\">\r\n              Download QR Code\r\n            </button>\r\n            <button \r\n              onClick={() => setIsSubmitted(false)}\r\n              className=\"edit-btn\"\r\n            >\r\n              Edit Information\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GenerateQR;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}